(this["webpackJsonpinfo-retrieval-frontend"]=this["webpackJsonpinfo-retrieval-frontend"]||[]).push([[0],{100:function(e,t,a){},101:function(e,t,a){},102:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(15),o=a.n(l),c=(a(56),a(12)),i=a(13),s=a(17),u=a(16),m=a(18),d=(a(57),a(106)),h=a(103),g=a(104),E=a(105),f=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState({text:e.target.value})},n.handleSubmit=function(e){e.preventDefault(),localStorage.setItem("queryText",n.state.text),n.props.history.push({pathname:"/query"})},n.state={text:""},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){localStorage.setItem("dateSince",""),localStorage.setItem("queryText",""),localStorage.setItem("dateTo",""),localStorage.setItem("embedding","OFF"),localStorage.setItem("authors",[]),localStorage.setItem("curPage",0),localStorage.setItem("totalPage",-1)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement(h.a,null,r.a.createElement(g.a,{type:"text",value:this.state.title,onChange:this.handleChange,placeholder:"What do you want to know about COVID-19?"}),r.a.createElement("br",null),r.a.createElement(E.a,{className:"btn-round mr-1",color:"neutral",type:"submit",value:"Submit",onClick:this.handleSubmit,outline:!0},"Submit"),r.a.createElement(E.a,{className:"btn-round",color:"neutral",type:"button",value:"Submit",onClick:this.handleSubmit,outline:!0},"Advanced Search")))}}]),a}(n.Component),p=Object(m.e)(f);var b=function(){var e=r.a.createRef();return r.a.useEffect((function(){if(window.innerWidth<991){var t=function(){var t=window.pageYOffset/3;e.current.style.transform="translate3d(0,"+t+"px,0)"};return window.addEventListener("scroll",t),function(){window.removeEventListener("scroll",t)}}})),r.a.createElement("div",null,r.a.createElement("div",{style:{backgroundImage:"url("+a(25)+")"},ref:e,className:"page-header","data-parallax":!0},r.a.createElement("div",{className:"filter"}),r.a.createElement(d.a,null,r.a.createElement("div",{className:"motto text-center"},r.a.createElement("h1",null,"COVID-19 Seach Engine"),r.a.createElement("h3",null,"Start your general search from here."),r.a.createElement(p,null)))))},v=a(48),S=a(19),y=a.n(S),x=a(21),T=a.n(x),O=a(14),N=a(107),I=a(108),P=function(e){var t="ON"===e.embedding?e.info.covidMeta:e.info,a="";if(void 0!==t.authors&&null!==t.authors&&void 0!==t.authors&&t.authors.length>0){a=t.authors[0];for(var n=1;n<t.authors.length&&n<3;n++)a=a+", "+t.authors[n];t.authors.length>=3?a+="...":a+="."}else a="Unknown";var l="ON"===e.embedding?r.a.createElement("p",null,"Paragraph: ",e.info.sentence.text):void 0!==t.textAbstract&&null!==t.textAbstract&&t.textAbstract.length>0&&t.textAbstract[0].length>0?r.a.createElement("p",null,"Abstract: ",t.textAbstract[0].substring(0,800)):void 0!==t.bodyText&&null!==t.bodyText&&t.bodyText.length>0&&t.bodyText[0].length>0?r.a.createElement("p",null,"Body: ",e.info.bodyText[0].substring(0,800)):r.a.createElement("p",null,"No text"),o="OFF"===e.embedding?r.a.createElement(N.a,{sm:"auto"},r.a.createElement("p",null,"Score: ",t.score)):r.a.createElement(N.a,{sm:"auto"},r.a.createElement("p",null,"Score: ",e.info.sentence.score)),c=void 0!==t.url&&t.url.length>0?r.a.createElement(N.a,{sm:"auto"},r.a.createElement("a",{href:t.url},"view original text")):r.a.createElement("div",null);return r.a.createElement("div",null,r.a.createElement("div",{className:"mt-4"},r.a.createElement(O.b,{style:{color:"#403e3e",fontSize:21},onClick:function(t){return e.handleRedirectDocInfo(t,e.ID)}},void 0!==t.title&&null!==t.title&&t.title.length>0?t.title:"NO TITLE FOR THIS ARTICLE")),r.a.createElement(I.a,{className:"mt-1"},r.a.createElement(N.a,{sm:"auto"},r.a.createElement("p",null,"Authors: ",a)),r.a.createElement(N.a,{sm:"auto"},r.a.createElement("p",null,"Publish Time: ",t.publishTime)),o,c),l)},C=a(109),D=a(110),k=a(111),q=function(e){var t=e.curPage,a=e.totalPage,n=e.handleNav;t+=1;var l=[];if(a<=0)return r.a.createElement("div",null);if(a<=9)for(var o=1;o<=a;o++)l.push(o);else if(t<=5)for(var c=1;c<=9;c++)l.push(c);else if(t+4<=a)for(var i=t-4;i<=t+4;i++)l.push(i);else for(var s=a-8;s<=a;s++)l.push(s);var u=[];return l.map((function(e){e!==t?u.push(r.a.createElement(C.a,{key:e},r.a.createElement(D.a,{href:"#pablo",onClick:function(t){return n(t,e-1)}},e))):u.push(r.a.createElement(C.a,{key:e,className:"active"},r.a.createElement(D.a,{href:"#pablo",onClick:function(t){return n(t,e-1)}},e,r.a.createElement("span",{className:"sr-only"},"(current)"))))})),r.a.createElement("nav",{"aria-label":"..."},r.a.createElement(k.a,null,r.a.createElement(C.a,null,r.a.createElement(D.a,{href:"#pablo",onClick:function(e){return n(e,-1)},tabIndex:"-1"},"Previous")),u,r.a.createElement(C.a,null,r.a.createElement(D.a,{href:"#pablo",onClick:function(e){return n(e,-2)}},"Next"))))},w=a(29),j=a.n(w),F=a(112),A=a(113),M=a(114),R=a(115),Y=a(49),L=function(e){var t=e.handleAuthorsChange,a=e.handleTextChange,n=e.handlesubmit,l=e.handleDateSinceChange,o=e.handleEmbeddingChange,c=e.handleDateToChange,i=e.states;return r.a.createElement("div",{className:"section"},r.a.createElement(d.a,null,r.a.createElement(h.a,{onSubmit:n},r.a.createElement("div",null,r.a.createElement(I.a,null,r.a.createElement(N.a,{sm:"9"},r.a.createElement(F.a,null,r.a.createElement(A.a,{for:"text",id:"bootstrap-overrides"},"Text Search"),r.a.createElement(g.a,{id:"text",className:"mr-1",name:"queryText",type:"text",value:i.queryText,onChange:a}))),r.a.createElement(N.a,{sm:"1"}),r.a.createElement(N.a,{sm:"auto"},r.a.createElement(F.a,null,r.a.createElement(E.a,{id:"search-btn",className:"btn-round mr-1 mt-4",color:"primary",outline:!0,type:"submit"},"Search"))))),r.a.createElement("div",{className:"mt-2"},r.a.createElement(I.a,null,r.a.createElement(N.a,{sm:"3"},"ON"===i.embedding?r.a.createElement("div",null):r.a.createElement(F.a,null,r.a.createElement(A.a,{for:"author",id:"bootstrap-overrides"},"Author"),r.a.createElement(g.a,{id:"author",className:"mr-1",name:"author",type:"text",value:i.authors,onChange:t}))),r.a.createElement(N.a,{sm:"3"},"ON"===i.embedding?r.a.createElement("div",null):r.a.createElement(F.a,null,r.a.createElement(A.a,{id:"bootstrap-overrides"},"Date Since"),r.a.createElement(M.a,{className:"date",id:"datetimepicker"},r.a.createElement(j.a,{dateFormat:"YYYY-MM-DD",timeFormat:!1,onChange:l,value:i.dateSince,inputProps:{placeholder:""}}),r.a.createElement(R.a,{addonType:"append"},r.a.createElement(Y.a,null,r.a.createElement("span",{className:"glyphicon glyphicon-calendar"},r.a.createElement("i",{"aria-hidden":!0,className:"fa fa-calendar"}))))))),r.a.createElement(N.a,{sm:"3"},"ON"===i.embedding?r.a.createElement("div",null):r.a.createElement(F.a,null,r.a.createElement(A.a,{id:"bootstrap-overrides"},"Date to"),r.a.createElement(M.a,{className:"date",id:"datetimepicker"},r.a.createElement(j.a,{dateFormat:"YYYY-MM-DD",timeFormat:!1,onChange:c,value:i.dateTo,inputProps:{placeholder:""}}),r.a.createElement(R.a,{addonType:"append"},r.a.createElement(Y.a,null,r.a.createElement("span",{className:"glyphicon glyphicon-calendar"},r.a.createElement("i",{"aria-hidden":!0,className:"fa fa-calendar"}))))))),r.a.createElement(N.a,{sm:"1"}),r.a.createElement(N.a,{sm:"auto"},r.a.createElement(F.a,null,r.a.createElement(A.a,{for:"inputState"},"Embedding Search"),r.a.createElement(g.a,{type:"select",name:"select",id:"inputState",value:i.embedding,onChange:o},r.a.createElement("option",null,"OFF"),r.a.createElement("option",null,"ON"))))))),r.a.createElement(N.a,{sm:"5"})))},J=function(){function e(){Object(c.a)(this,e)}return Object(i.a)(e,null,[{key:"parseDate",value:function(e){return e.split("T")[0]}}]),e}(),V=a(50),W=a(116);var z=function(e){var t=r.a.useState(!1),n=Object(V.a)(t,2),l=n[0],o=n[1];return r.a.createElement("div",null,r.a.createElement(E.a,{color:"primary",type:"button",onClick:function(){return o(!0)}},"View Search Trend for this embedding query"),r.a.createElement(W.a,{isOpen:l,toggle:function(){return o(!1)}},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalLiveLabel"},e.title)),r.a.createElement("div",{className:"modal-body"},r.a.createElement("img",{style:{maxWidth:"100%"},src:a(99),alt:""}))))},B="http://localhost:8090",_=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).localStore=function(){localStorage.setItem("dateSince",a.state.dateSince),localStorage.setItem("queryText",a.state.queryText),localStorage.setItem("dateTo",a.state.dateTo),localStorage.setItem("embedding",a.state.embedding),localStorage.setItem("authors",a.state.authors),localStorage.setItem("curPage",a.state.curPage)},a.handleDateSinceChange=function(e){e=J.parseDate(e._d.toISOString()),a.setState({dateSince:e},(function(){console.log(a.state.dateSince)}))},a.handleDateToChange=function(e){e=J.parseDate(e._d.toISOString()),a.setState({dateTo:e},(function(){console.log(a.state.dateTo)}))},a.handleEmbeddingChange=function(e){a.setState({embedding:e.target.value},(function(){console.log("embedding: "+a.state.embedding)}))},a.handleTextChange=function(e){var t=e.target,n=t.value,r=t.name;a.setState(Object(v.a)({},r,n),(function(){console.log(r+":"+n)}))},a.handleAuthorsChange=function(e){var t=e.target.value.split(","),n=[];t.map((function(e){return n.push(e)})),a.setState({authors:n})},a.handleSubmit=function(e){e.preventDefault(),a.localStore(),"ON"===a.state.embedding?(a.embedding="ON",y.a.get("".concat(B,"/").concat("query","/").concat("vector"),{params:{query:a.state.queryText}}).then((function(e){return e.data})).then((function(e){a.setState({content:e,totalPage:-1})})).then((function(){return console.log(a.state.content)}))):(a.embedding="OFF",y.a.get("".concat(B,"/").concat("query","/").concat("query"),{params:{text:a.state.queryText,authors:a.state.authors,dateSince:a.state.dateSince,dateTo:a.state.dateTo,page:0},paramsSerializer:function(e){return T.a.stringify(e,{arrayFormat:"repeat"})}}).then((function(e){return e.data})).then((function(e){a.setState({content:e.content,totalPage:e.totalPages})})).then((function(){return console.log(a.state.content)})))},a.handleNav=function(e,t){-1===t?t=a.state.curPage-1:-2===t&&(t=a.state.curPage+1),t<0||t>a.state.totalPage||("ON"===a.state.embedding?(a.embedding="ON",y.a.get("".concat(B,"/").concat("query","/").concat("vector"),{params:{query:a.state.queryText}}).then((function(e){return e.data})).then((function(e){a.setState({content:e,totalPage:-1,curPage:t})})).then((function(){return console.log(a.state.content)}))):(a.embedding="OFF",y.a.get("".concat(B,"/").concat("query","/").concat("query"),{params:{text:a.state.queryText,authors:a.state.authors,dateSince:a.state.dateSince,dateTo:a.state.dateTo,page:t},paramsSerializer:function(e){return T.a.stringify(e,{arrayFormat:"repeat"})}}).then((function(e){return e.data})).then((function(e){a.setState({content:e.content,totalPage:e.totalPages,curPage:t})})).then((function(){return a.localStore()}))))},a.handleRedirectDocInfo=function(e,t){var n="";a.state.content.map((function(e,r){"ON"===a.embedding?r===t&&(n=e.covidMeta):r===t&&(n=e)})),localStorage.setItem("curDocInfo",JSON.stringify(n)),a.props.history.push({pathname:"/doc"})},a.embedding="OFF",a.state={curPage:0,totalPage:-1,queryText:"",authors:"",dateSince:"",dateTo:"",embedding:"OFF",content:[]},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.setState({curPage:localStorage.hasOwnProperty("curPage")?localStorage.getItem("curPage"):0,totalPage:localStorage.hasOwnProperty("totalPage")?localStorage.getItem("totalPage"):-1,queryText:localStorage.hasOwnProperty("queryText")?localStorage.getItem("queryText"):"",authors:localStorage.hasOwnProperty("authors")?localStorage.getItem("authors"):[],dateSince:localStorage.hasOwnProperty("dateSince")?localStorage.getItem("dateSince"):"",dateTo:localStorage.hasOwnProperty("dateTo")?localStorage.getItem("dateTo"):"",embedding:localStorage.hasOwnProperty("embedding")?localStorage.getItem("embedding"):"OFF"},(function(){e.embedding=e.state.embedding,"ON"===e.state.embedding?y.a.get("".concat(B,"/").concat("query","/").concat("vector"),{params:{query:e.state.queryText}}).then((function(e){return e.data})).then((function(t){e.setState({content:t,totalPage:-1})})):(console.log("curPage after refresh:"+e.state.curPage),y.a.get("".concat(B,"/").concat("query","/").concat("query"),{params:{text:e.state.queryText,authors:e.state.authors,dateSince:e.state.dateSince,dateTo:e.state.dateTo,page:e.state.curPage},paramsSerializer:function(e){return T.a.stringify(e,{arrayFormat:"repeat"})}}).then((function(e){return e.data})).then((function(t){e.setState({content:t.content,totalPage:t.totalPages})})))}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{style:{backgroundImage:"url("+a(25)+")"},className:"page-header page-header-xs","data-parallax":!0},r.a.createElement("div",{className:"filter"}),r.a.createElement("div",{className:"motto text-center"},r.a.createElement("h1",null,"COVID-19 Advanced Search"))),r.a.createElement("div",null,r.a.createElement(L,{handleTextChange:this.handleTextChange,handlesubmit:this.handleSubmit,handleDateSinceChange:this.handleDateSinceChange,handleDateToChange:this.handleDateToChange,handleEmbeddingChange:this.handleEmbeddingChange,handleAuthorsChange:this.handleAuthorsChange,states:this.state})),r.a.createElement("div",null,r.a.createElement(d.a,null,"ON"===this.embedding&&r.a.createElement(z,{title:this.state.queryText}),this.state.content.map((function(t,a){return r.a.createElement(P,{key:a,ID:a,info:t,embedding:e.embedding,handleRedirectDocInfo:e.handleRedirectDocInfo})})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(q,{totalPage:this.state.totalPage,curPage:this.state.curPage,handleNav:this.handleNav}))))}}]),n}(n.Component),H=Object(m.e)(_),U=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={content:""},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){console.log(JSON.parse(localStorage.getItem("curDocInfo"))),this.setState({content:JSON.parse(localStorage.getItem("curDocInfo"))})}},{key:"render",value:function(){var e="";if(null!==this.state.content.authors&&void 0!==this.state.content.authors&&this.state.content.authors.length>0){e=this.state.content.authors[0];for(var t=1;t<this.state.content.authors.length;t++)e=e+", "+this.state.content.authors[t];e+="."}else e="Unknown";return r.a.createElement("div",null,r.a.createElement("div",{style:{backgroundImage:"url("+a(25)+")"},className:"page-header page-header-xs","data-parallax":!0},r.a.createElement("div",{className:"filter"}),r.a.createElement("div",{className:"motto text-center"},r.a.createElement("h1",null,"COVID-19 Document Infomation"))),r.a.createElement(d.a,null,r.a.createElement("br",null),r.a.createElement("div",{className:"mt-5"},r.a.createElement("h3",null,void 0!==this.state.content.title&&null!==this.state.content.title&&this.state.content.title.length>0?this.state.content.title:"NO TITLE FOR THIS ARTICLE")),r.a.createElement("div",{className:"mt-3"},r.a.createElement(I.a,null,r.a.createElement(N.a,{sm:"auto"},r.a.createElement("p",null,"Authors: ",e)),r.a.createElement(N.a,{sm:"auto"},r.a.createElement("p",null,"Publish Time: ",this.state.content.publishTime)),r.a.createElement(N.a,null,r.a.createElement("a",{href:this.state.content.url},"view original text")))),r.a.createElement("div",null,void 0!==this.state.content.textAbstract&&this.state.content.textAbstract.length>0&&r.a.createElement("p",null,"Abstract: ",this.state.content.textAbstract)),r.a.createElement("div",{className:"mt-3"},null!==this.state.content.bodyText&&void 0!==this.state.content.bodyText&&this.state.content.bodyText.length>0&&this.state.content.bodyText.map((function(e,t){return r.a.createElement("div",{key:t,className:"mt-1"},r.a.createElement("p",null,e))}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null)))}}]),n}(n.Component),$=Object(m.e)(U),G=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.call(this)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(m.a,{exact:!0,path:"/",component:b}),r.a.createElement(m.a,{exact:!0,path:"/query",component:H}),r.a.createElement(m.a,{exact:!0,path:"/doc",component:$}))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(100),a(101);o.a.render(r.a.createElement(O.a,null,r.a.createElement(G,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},25:function(e,t,a){e.exports=a.p+"static/media/covid19.63e257ff.jpg"},51:function(e,t,a){e.exports=a(102)},56:function(e,t,a){},57:function(e,t,a){},99:function(e,t,a){e.exports=a.p+"static/media/trend_test.56bd17e0.jpg"}},[[51,1,2]]]);
//# sourceMappingURL=main.6a831249.chunk.js.map